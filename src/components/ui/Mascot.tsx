import React from 'react';
import { cn } from "@/lib/utils"; 

interface MascotProps extends React.SVGProps<SVGSVGElement> {
  variant?: 'happy' | 'waiting' | 'typing';
  className?: string;
}

const Mascot = ({ variant = 'happy', className, ...props }: MascotProps) => {
  // Định nghĩa màu sắc cho từng trạng thái
  // Các class này sẽ lấy màu từ file index.css
  const variantClasses = {
    happy: "text-primary",        // #A9A1BD trong dark theme
    waiting: "text-secondary",    // Màu tím đậm hơn
    typing: "text-primary",       // Dùng màu happy khi đang gõ
  };

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 100 85" // Tỷ lệ oval ngang
      className={cn("transition-colors duration-300", variantClasses[variant], className)}
      {...props}
    >
      {/* Thân bubble với đuôi cong mềm mại */}
      <path
        fill="currentColor"
        d="M95,40 C95,62.09 75.84,80 50,80 C36.93,80 25.43,73.45 18.5,63.5 C20.97,64.5 24.3,65 27,65 C38.05,65 47,56.05 47,45 C47,44.59 46.97,44.18 46.92,43.78 C59.4,41.93 69.83,31.79 72.48,19.5 C72.82,19.67 73.16,19.83 73.5,19.98 C79.61,22.81 85,29.82 85,38 C85,38.28 84.99,38.56 84.97,38.84 C90.87,35.61 95,29.18 95,22 C95,18.06 93.42,14.47 90.81,11.75 C93.58,18.52 95,25.91 95,34 C95,36.03 94.78,38.01 94.38,39.92 C94.79,39.96 94.89,40 95,40 Z M50,5 C25.16,5 5,25.16 5,50 C5,74.84 25.16,95 50,95 C62.83,95 74.34,89.34 82.5,80.5 C80.03,81.5 76.7,82 74,82 C62.95,82 54,73.05 54,62 C54,62.41 54.03,62.82 54.08,63.22 C41.6,65.07 31.17,75.21 28.52,87.5 C28.18,87.33 27.84,87.17 27.5,87.02 C21.39,84.19 16,77.18 16,69 C16,68.72 16.01,68.44 16.03,68.16 C10.13,71.39 6,77.82 6,85 C6,88.94 7.58,92.53 10.19,95.25 C7.42,88.48 6,81.09 6,73 C6,70.97 6.22,68.99 6.62,67.08 C6.21,67.04 6.11,67 6,67 C-6.93,67 -18.43,73.55 -25.5,83.5 C-27.97,82.5 -31.3,82 -34,82 C-45.05,82 -54,90.95 -54,102 C-54,101.59 -53.97,101.18 -53.92,100.78 C-41.4,102.63 -30.97,112.79 -28.32,125.5 C-27.98,125.33 -27.64,125.17 -27.3,125.02 C-21.19,122.19 -16,115.18 -16,107 C-16,106.72 -16.01,106.44 -16.03,106.16 C-10.13,109.39 -6,115.82 -6,123 C-6,126.94 -7.58,130.53 -10.19,133.25 C-7.42,126.48 -6,119.09 -6,111 C-6,108.97 -6.22,106.99 -6.62,105.08 C-6.21,105.04 -6.11,105 -6,105 C6.93,105 18.43,98.45 25.5,88.5 C27.97,89.5 31.3,90 34,90 C45.05,90 54,81.05 54,70 C54,70.41 54.03,70.82 54.08,71.22 C66.6,69.37 77.03,59.21 79.68,46.5 C80.02,46.67 80.36,46.83 80.7,46.98 C86.81,49.81 92,56.82 92,65 C92,65.28 91.99,65.56 91.97,65.84 C97.87,62.61 102,56.18 102,49 C102,45.06 100.42,41.47 97.81,38.75 C100.58,45.52 102,52.91 102,61 C102,63.03 101.78,65.01 101.38,66.92 C101.79,66.96 101.89,67 102,67 C115.07,67 126.57,60.45 133.5,50.5 C131.03,51.5 127.7,52 125,52 C113.95,52 105,43.05 105,32 C105,32.41 105.03,32.82 105.08,33.22 C92.6,35.07 82.17,45.21 79.52,57.5 C79.18,57.33 78.84,57.17 78.5,57.02 C72.39,54.19 67,47.18 67,40 C67,39.72 67.01,39.44 67.03,39.16 C61.13,42.39 57,48.82 57,56 C57,59.94 58.58,63.53 61.19,66.25 C58.42,59.48 57,52.09 57,44 C57,41.97 57.22,39.99 57.62,38.08 C57.21,38.04 57.11,38 57,38 C44.93,38 33.43,44.55 26.5,54.5 C28.97,53.5 32.3,53 35,53 C46.05,53 55,44.05 55,33 C55,33.41 55.03,33.82 55.08,34.22 C42.6,36.07 32.17,46.21 29.52,58.5 C29.18,58.33 28.84,58.17 28.5,58.02 C22.39,55.19 17,48.18 17,41 C17,40.72 17.01,40.44 17.03,40.16 C11.13,43.39 7,49.82 7,57 C7,60.94 8.58,64.53 11.19,67.25 C8.42,60.48 7,53.09 7,45 C7,42.97 7.22,40.99 7.62,39.08 C7.21,39.04 7.11,39 7,39 C-5.07,39 -16.57,45.55 -23.5,55.5 C-21.03,54.5 -17.7,54 -15,54 C-3.95,54 5,45.05 5,34 C5,34.41 5.03,34.82 5.08,35.22 C17.6,33.37 28.03,23.21 30.68,10.5 C30.98,10.67 31.32,10.83 31.66,10.98 C37.8,13.81 43,20.82 43,29 C43,29.28 42.99,29.56 42.97,29.84 C37.07,33.07 33,39.5 33,47 C33,50.94 34.58,54.53 37.19,57.25 C39.97,50.48 41,43.09 41,35 C41,32.97 40.78,30.99 40.38,29.08 C40.79,29.04 40.89,29 41,29 C50,29 60,20 60,10 C60,22 50,30 40,30 C30,30 20,22 20,10 C20,-2 30,-10 40,-10 C50,-10 60,-2 60,10 Z M 70, 70"
        transform="translate(0, -10)"
      />

      {/* Mắt và miệng sử dụng màu #3B2D4C */}
      <circle cx="42" cy="38" r="4.5" fill="#3B2D4C" />
      <circle cx="62" cy="38" r="4.5" fill="#3B2D4C" />

      {/* Biểu cảm miệng */}
      {variant === 'happy' && (
        <path d="M 45 52 Q 52 60 59 52" stroke="#3B2D4C" strokeWidth="3" fill="none" strokeLinecap="round" />
      )}
      {variant === 'waiting' && (
        <path d="M 45 55 Q 52 47 59 55" stroke="#3B2D4C" strokeWidth="3" fill="none" strokeLinecap="round" />
      )}
      {variant === 'typing' && (
        <g fill="#3B2D4C">
            <circle cx="42" cy="54" r="4" />
            <circle cx="52" cy="54" r="4" />
            <circle cx="62" cy="54" r="4" />
        </g>
      )}
    </svg>
  );
};

export default Mascot;
